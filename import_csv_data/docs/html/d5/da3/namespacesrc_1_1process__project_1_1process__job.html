<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Organise AI4SH in-situ data: src.process_project.process_job Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../ai4soilhealth_x55.png"/></td>
  <td id="projectalign">
   <div id="projectname">Organise AI4SH in-situ data
   </div>
   <div id="projectbrief">Compile AI4SH in-situ soil observations from spreadsheet CSV data to a json formatted database</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('d5/da3/namespacesrc_1_1process__project_1_1process__job.html','../../',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">src.process_project.process_job Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:Params" id="r_Params"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd3/classsrc_1_1process__project_1_1process__job_1_1_params.html">Params</a></td></tr>
<tr class="memitem:Struct" id="r_Struct"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d98/classsrc_1_1process__project_1_1process__job_1_1_struct.html">Struct</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a02c660e420ee37a3e0670cc4eb333a4d" id="r_a02c660e420ee37a3e0670cc4eb333a4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a02c660e420ee37a3e0670cc4eb333a4d">Update_dict</a> (user_D, default_D)</td></tr>
<tr class="memitem:a20852e73184bb3e60746631cce394563" id="r_a20852e73184bb3e60746631cce394563"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20852e73184bb3e60746631cce394563">Check_param_instance</a> (p, typeD, process_D, json_file_FN, p_str)</td></tr>
<tr class="memitem:aed1d9dd5c526dc5e1e56311b481d6e36" id="r_aed1d9dd5c526dc5e1e56311b481d6e36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed1d9dd5c526dc5e1e56311b481d6e36">Project_login</a> (default_parameter_D)</td></tr>
<tr class="memitem:ad9b800d2ec43befff2c1735fe208c90c" id="r_ad9b800d2ec43befff2c1735fe208c90c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad9b800d2ec43befff2c1735fe208c90c">Get_process_from_db</a> (pg_session_C, process_schema, process_parameter_C, user_status_D, json_file_obj, p_str)</td></tr>
<tr class="memitem:ae34f96646ec14ee098826ac3eb300226" id="r_ae34f96646ec14ee098826ac3eb300226"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae34f96646ec14ee098826ac3eb300226">Job_processes_loop</a> (default_parameter_D, user_json_process_L, process_path='', process_schema='process')</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Created on 5 jan 2025
Updated 11 Mar 2025

@author: thomasgumbricht
</pre> </div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a20852e73184bb3e60746631cce394563" name="a20852e73184bb3e60746631cce394563"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20852e73184bb3e60746631cce394563">&#9670;&#160;</a></span>Check_param_instance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.process_project.process_job.Check_param_instance </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>p</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>typeD</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>process_D</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>json_file_FN</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>p_str</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d17/process__job_8py_source.html#l00044">44</a> of file <a class="el" href="../../dc/d17/process__job_8py_source.html">process_job.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   44</span><span class="keyword">def </span>Check_param_instance(p, typeD, process_D, json_file_FN, p_str):</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>    <span class="keyword">def </span>_Print_error_msg(error_msg):</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>        error_msg += <span class="stringliteral">&#39;              (file: %s;  process nr %s)&#39;</span> %(json_file_FN, p_str)</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordflow">print</span> (error_msg)</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;array&#39;</span> <span class="keywordflow">in</span> typeD[p].lower() <span class="keywordflow">or</span> typeD[p].lower()[0:3] == <span class="stringliteral">&#39;csv&#39;</span>:</div>
<div class="line"><span class="lineno">   53</span>        </div>
<div class="line"><span class="lineno">   54</span>        <span class="comment"># TGTODO The array (csvList) is a tricky alternative to solve here</span></div>
<div class="line"><span class="lineno">   55</span>        <span class="comment">#if not isinstance(process_D[p], list):</span></div>
<div class="line"><span class="lineno">   56</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(process_D[p], str) <span class="keywordflow">and</span> <span class="keywordflow">not</span> isinstance(process_D[p], list):</div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span>            error_msg = <span class="stringliteral">&#39;          ❌ WARNING parameter %s is not a list (%s)\n&#39;</span> %(p,process_D[p])</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>            _Print_error_msg(error_msg)</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">elif</span> typeD[p].lower()[0:3] == <span class="stringliteral">&#39;tex&#39;</span>:</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(process_D[p], str):</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>            error_msg = <span class="stringliteral">&#39;          ❌ WARNING parameter %s is not a string (%s)\n&#39;</span> %(p,process_D[p])</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>            _Print_error_msg(error_msg)</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>        <span class="keywordflow">if</span> <span class="stringliteral">&#39;_dir&#39;</span> <span class="keywordflow">in</span> p.lower():</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>            <span class="keywordflow">if</span> process_D[p][0] <span class="keywordflow">in</span> [<span class="stringliteral">&#39;/&#39;</span>] <span class="keywordflow">or</span> process_D[p][len(process_D[p])-1] <span class="keywordflow">in</span> [<span class="stringliteral">&#39;/&#39;</span>]:</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>                error_msg = <span class="stringliteral">&#39;          ❌ WARNING parameter %s can not start or end with a slash (%s)\n&#39;</span> %(p,process_D[p])</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>                _Print_error_msg(error_msg)</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>                <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>    <span class="keywordflow">elif</span> typeD[p].lower()[0:3] == <span class="stringliteral">&#39;int&#39;</span>:</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(process_D[p], int) <span class="keywordflow">and</span> <span class="keywordflow">not</span> process_D[p].isdigit():</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>            error_msg = <span class="stringliteral">&#39;          ❌ WARNING parameter %s is not an integer (%s)\n&#39;</span> %(p,process_D[p])</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>            _Print_error_msg(error_msg)</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">elif</span> typeD[p].lower()[0:3] == <span class="stringliteral">&#39;flo&#39;</span>:</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(process_D[p], float):</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(process_D[p], int):</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>                error_msg = <span class="stringliteral">&#39;          ❌ WARNING parameter %s is neither a float nor an integer (%s)\n&#39;</span> %(p,process_D[p])</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>                _Print_error_msg(error_msg)</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>                <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">elif</span> typeD[p].lower()[0:3] == <span class="stringliteral">&#39;boo&#39;</span>:</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(process_D[p], bool):</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>            <span class="keywordflow">if</span> isinstance(process_D[p], str) <span class="keywordflow">and</span> process_D[p].lower() <span class="keywordflow">in</span> [<span class="stringliteral">&#39;true&#39;</span>, <span class="stringliteral">&#39;1&#39;</span>]:</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>                process_D[p] = process_D[p].lower() == <span class="stringliteral">&#39;true&#39;</span></div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>            <span class="keywordflow">elif</span> isinstance(process_D[p], str) <span class="keywordflow">and</span> process_D[p].lower() <span class="keywordflow">in</span> [<span class="stringliteral">&#39;false&#39;</span>,<span class="stringliteral">&#39;0&#39;</span>]:</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>                process_D[p] = process_D[p].lower() == <span class="stringliteral">&#39;false&#39;</span></div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>                error_msg = <span class="stringliteral">&#39;          ❌ WARNING parameter %s is not a boolean (%s)\n&#39;</span> %(p,process_D[p])</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>                _Print_error_msg(error_msg)</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>                <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">return</span> 1</div>
<div class="line"><span class="lineno">  127</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da3/namespacesrc_1_1process__project_1_1process__job_a20852e73184bb3e60746631cce394563_icgraph.png" border="0" usemap="#ad5/da3/namespacesrc_1_1process__project_1_1process__job_a20852e73184bb3e60746631cce394563_icgraph" loading="lazy" alt=""/></div>
<map name="ad5/da3/namespacesrc_1_1process__project_1_1process__job_a20852e73184bb3e60746631cce394563_icgraph" id="ad5/da3/namespacesrc_1_1process__project_1_1process__job_a20852e73184bb3e60746631cce394563_icgraph">
<area shape="rect" title=" " alt="" coords="289,5,475,46"/>
<area shape="rect" href="../../d0/dd3/classsrc_1_1process__project_1_1process__job_1_1_params.html#a08c17535c1bd627b4afc7cacba5d3775" title=" " alt="" coords="5,5,241,46"/>
<area shape="poly" title=" " alt="" coords="273,28,241,28,241,23,273,23"/>
</map>
</div>

</div>
</div>
<a id="ad9b800d2ec43befff2c1735fe208c90c" name="ad9b800d2ec43befff2c1735fe208c90c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9b800d2ec43befff2c1735fe208c90c">&#9670;&#160;</a></span>Get_process_from_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.process_project.process_job.Get_process_from_db </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>pg_session_C</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>process_schema</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>process_parameter_C</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>user_status_D</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>json_file_obj</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>p_str</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d17/process__job_8py_source.html#l00991">991</a> of file <a class="el" href="../../dc/d17/process__job_8py_source.html">process_job.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  991</span><span class="keyword">def </span>Get_process_from_db(pg_session_C,process_schema,process_parameter_C,user_status_D,json_file_obj, p_str):</div>
<div class="line"><span class="lineno">  992</span>    </div>
<div class="line"><span class="lineno">  993</span>    <span class="comment"># Check if the process is in the database</span></div>
<div class="line"><span class="lineno">  994</span>    query_D = {<span class="stringliteral">&#39;sub_process_id&#39;</span>:p[<span class="stringliteral">&#39;sub_process_id&#39;</span>]}</div>
<div class="line"><span class="lineno">  995</span> </div>
<div class="line"><span class="lineno">  996</span>    record = pg_session_C._Single_Search(query_D, [<span class="stringliteral">&#39;sub_process_id&#39;</span>], process_schema, <span class="stringliteral">&#39;sub_process&#39;</span>)</div>
<div class="line"><span class="lineno">  997</span> </div>
<div class="line"><span class="lineno">  998</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> record:</div>
<div class="line"><span class="lineno">  999</span> </div>
<div class="line"><span class="lineno"> 1000</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;          ❌ WARNING: sub process &lt;%s&gt; not in DB - skipping&#39;</span> %p[<span class="stringliteral">&#39;sub_process_id&#39;</span>])</div>
<div class="line"><span class="lineno"> 1001</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;          Json: %s\n          process nr: %s&#39;</span> %(json_file_obj, p_str))</div>
<div class="line"><span class="lineno"> 1002</span> </div>
<div class="line"><span class="lineno"> 1003</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1004</span> </div>
<div class="line"><span class="lineno"> 1005</span>    <span class="comment"># Get the root process for this sub process</span></div>
<div class="line"><span class="lineno"> 1006</span>    query_D = {<span class="stringliteral">&#39;sub_process_id&#39;</span>:p[<span class="stringliteral">&#39;sub_process_id&#39;</span>]}</div>
<div class="line"><span class="lineno"> 1007</span> </div>
<div class="line"><span class="lineno"> 1008</span>    record = pg_session_C._Single_Search(query_D, [<span class="stringliteral">&#39;root_process_id&#39;</span>,<span class="stringliteral">&#39;min_user_stratum&#39;</span>], process_schema, <span class="stringliteral">&#39;sub_process&#39;</span>)</div>
<div class="line"><span class="lineno"> 1009</span> </div>
<div class="line"><span class="lineno"> 1010</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> record:</div>
<div class="line"><span class="lineno"> 1011</span> </div>
<div class="line"><span class="lineno"> 1012</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;          ❌ WARNING: root process id for sub process &lt;%s&gt; not in DB - skipping&#39;</span> %p[<span class="stringliteral">&#39;sub_process_id&#39;</span>])</div>
<div class="line"><span class="lineno"> 1013</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;          Json: %s\n          process nr: %s&#39;</span> %(json_file_obj, p_str))</div>
<div class="line"><span class="lineno"> 1014</span> </div>
<div class="line"><span class="lineno"> 1015</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span>    root_process_id, min_user_stratum = record</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span>    <span class="keywordflow">if</span> user_status_D[<span class="stringliteral">&#39;stratum_code&#39;</span>] &lt; min_user_stratum:</div>
<div class="line"><span class="lineno"> 1020</span> </div>
<div class="line"><span class="lineno"> 1021</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;          ❌ WARNING: user stratum too low for process %s - skipping&#39;</span> %p[<span class="stringliteral">&#39;sub_process_id&#39;</span>])</div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1024</span> </div>
<div class="line"><span class="lineno"> 1025</span>    process_parameter_C._Assemble_single_process(p_str, p, path.split(json_file_obj)[1])</div>
<div class="line"><span class="lineno"> 1026</span> </div>
<div class="line"><span class="lineno"> 1027</span>    status_OK = process_parameter_C._Assemble_parameters(pg_session_C)</div>
<div class="line"><span class="lineno"> 1028</span> </div>
<div class="line"><span class="lineno"> 1029</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> status_OK:</div>
<div class="line"><span class="lineno"> 1030</span> </div>
<div class="line"><span class="lineno"> 1031</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;\n          ❌ WARNING: process nr %s &lt;%s&gt; not ready - skipping&#39;</span> %(p_nr, p[<span class="stringliteral">&#39;sub_process_id&#39;</span>]))</div>
<div class="line"><span class="lineno"> 1032</span> </div>
<div class="line"><span class="lineno"> 1033</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>    </div>
<div class="line"><span class="lineno"> 1036</span>    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno"> 1037</span><span class="stringliteral">    # Initiate a Timestep object</span></div>
<div class="line"><span class="lineno"> 1038</span><span class="stringliteral">    timestep_C = Timesteps()</span></div>
<div class="line"><span class="lineno"> 1039</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1040</span><span class="stringliteral">    # Set the time period and frequency for the process</span></div>
<div class="line"><span class="lineno"> 1041</span><span class="stringliteral">    if hasattr(process_parameter_C.process_S, &#39;period&#39;):</span></div>
<div class="line"><span class="lineno"> 1042</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1043</span><span class="stringliteral">        timestep = timestep_C._Set_initial_timesteps( process_parameter_C.process_S.period )</span></div>
<div class="line"><span class="lineno"> 1044</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1045</span><span class="stringliteral">    else:</span></div>
<div class="line"><span class="lineno"> 1046</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1047</span><span class="stringliteral">        timestep = None</span></div>
<div class="line"><span class="lineno"> 1048</span><span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno"> 1049</span>    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno"> 1050</span><span class="stringliteral">    # Set timestep to the Timestep class</span></div>
<div class="line"><span class="lineno"> 1051</span><span class="stringliteral">    timestep = timestep_C</span></div>
<div class="line"><span class="lineno"> 1052</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1053</span><span class="stringliteral">    # Set the source and destination timesteps</span></div>
<div class="line"><span class="lineno"> 1054</span><span class="stringliteral">    status_OK = process_parameter_C._Set_timestep(timestep)</span></div>
<div class="line"><span class="lineno"> 1055</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1056</span><span class="stringliteral">    if not status_OK:</span></div>
<div class="line"><span class="lineno"> 1057</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1058</span><span class="stringliteral">        print (&#39;\n          ❌ WARNING: period and timesteps for process nr %s &lt;%s&gt; not ready - skipping&#39; %(p_nr, p[&#39;sub_process_id&#39;]))</span></div>
<div class="line"><span class="lineno"> 1059</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1060</span><span class="stringliteral">        continue</span></div>
<div class="line"><span class="lineno"> 1061</span><span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno"> 1062</span> </div>
<div class="line"><span class="lineno"> 1063</span>    </div>
<div class="line"><span class="lineno"> 1064</span>    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno"> 1065</span><span class="stringliteral">    # Initiate a Location object</span></div>
<div class="line"><span class="lineno"> 1066</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1067</span><span class="stringliteral">    location_C = Location(process_parameter_C.process_S, </span></div>
<div class="line"><span class="lineno"> 1068</span><span class="stringliteral">                            pg_session_C )</span></div>
<div class="line"><span class="lineno"> 1069</span><span class="stringliteral">    </span></div>
<div class="line"><span class="lineno"> 1070</span><span class="stringliteral">    # Set the time period and frequency for the process</span></div>
<div class="line"><span class="lineno"> 1071</span><span class="stringliteral">    if hasattr(process_parameter_C.process_S, &#39;coordinate_system&#39;):</span></div>
<div class="line"><span class="lineno"> 1072</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1073</span><span class="stringliteral">        location = location_C._Set_initial_location( process_parameter_C.process_S.parameters, </span></div>
<div class="line"><span class="lineno"> 1074</span><span class="stringliteral">                                                    process_parameter_C.process_S.coordinate_system, </span></div>
<div class="line"><span class="lineno"> 1075</span><span class="stringliteral">                                                    pg_session_C )</span></div>
<div class="line"><span class="lineno"> 1076</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1077</span><span class="stringliteral">    else:</span></div>
<div class="line"><span class="lineno"> 1078</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1079</span><span class="stringliteral">        location = None</span></div>
<div class="line"><span class="lineno"> 1080</span><span class="stringliteral">    </span></div>
<div class="line"><span class="lineno"> 1081</span><span class="stringliteral">    if not location:</span></div>
<div class="line"><span class="lineno"> 1082</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1083</span><span class="stringliteral">        print (&#39;\n          ❌ WARNING: period and timesteps for process nr %s &lt;%s&gt; not ready - skipping&#39; %(p_nr, p[&#39;sub_process_id&#39;]))</span></div>
<div class="line"><span class="lineno"> 1084</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1085</span><span class="stringliteral">        continue</span></div>
<div class="line"><span class="lineno"> 1086</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1087</span><span class="stringliteral">    # Set timestep to the Timestep class</span></div>
<div class="line"><span class="lineno"> 1088</span><span class="stringliteral">    location = location_C</span></div>
<div class="line"><span class="lineno"> 1089</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1090</span><span class="stringliteral">    # Set the source and destination timesteps</span></div>
<div class="line"><span class="lineno"> 1091</span><span class="stringliteral">    status_OK = process_parameter_C._Set_location(location)</span></div>
<div class="line"><span class="lineno"> 1092</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1093</span><span class="stringliteral">    if not status_OK:</span></div>
<div class="line"><span class="lineno"> 1094</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1095</span><span class="stringliteral">        print (&#39;\n          ❌ WARNING: location for process nr %s &lt;%s&gt; not ready - skipping&#39; %(p_nr, p[&#39;sub_process_id&#39;]))</span></div>
<div class="line"><span class="lineno"> 1096</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1097</span><span class="stringliteral">        continue</span></div>
<div class="line"><span class="lineno"> 1098</span><span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno"> 1099</span> </div>
<div class="line"><span class="lineno"> 1100</span>    </div>
<div class="line"><span class="lineno"> 1102</span>    status_OK = process_parameter_C._Set_timestep(pg_session_C)</div>
<div class="line"><span class="lineno"> 1103</span> </div>
<div class="line"><span class="lineno"> 1104</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> status_OK:</div>
<div class="line"><span class="lineno"> 1105</span> </div>
<div class="line"><span class="lineno"> 1106</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;\n          ❌ WARNING: timestep for process nr %s &lt;%s&gt; not ready - skipping&#39;</span> %(p_nr, p[<span class="stringliteral">&#39;sub_process_id&#39;</span>]))</div>
<div class="line"><span class="lineno"> 1107</span> </div>
<div class="line"><span class="lineno"> 1108</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1109</span> </div>
<div class="line"><span class="lineno"> 1110</span>    </div>
<div class="line"><span class="lineno"> 1112</span>    status_OK = process_parameter_C._Set_paths(pg_session_C)</div>
<div class="line"><span class="lineno"> 1113</span> </div>
<div class="line"><span class="lineno"> 1114</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> status_OK:</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;\n          ❌ WARNING: src/dst volumes for process nr %s &lt;%s&gt; not ready - skipping&#39;</span> %(p_nr, p[<span class="stringliteral">&#39;sub_process_id&#39;</span>]))</div>
<div class="line"><span class="lineno"> 1117</span> </div>
<div class="line"><span class="lineno"> 1118</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1119</span> </div>
<div class="line"><span class="lineno"> 1120</span>    <span class="comment">#process_parameter_C._Set_compositions(pg_session_C)</span></div>
<div class="line"><span class="lineno"> 1121</span> </div>
<div class="line"><span class="lineno"> 1122</span>    <span class="comment">#PP._CopyCompositions(self.session)</span></div>
<div class="line"><span class="lineno"> 1123</span> </div>
<div class="line"><span class="lineno"> 1124</span>    <span class="comment">#PP._SetLayers()</span></div>
<div class="line"><span class="lineno"> 1125</span> </div>
<div class="line"><span class="lineno"> 1126</span>    status_OK = process_parameter_C._Location(pg_session_C)</div>
<div class="line"><span class="lineno"> 1127</span> </div>
<div class="line"><span class="lineno"> 1128</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> status_OK:</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;\n          ❌ WARNING: location for process nr %s &lt;%s&gt; not ready - skipping&#39;</span> %(p_nr, p[<span class="stringliteral">&#39;sub_process_id&#39;</span>]))</div>
<div class="line"><span class="lineno"> 1131</span> </div>
<div class="line"><span class="lineno"> 1132</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1133</span> </div>
<div class="line"><span class="lineno"> 1134</span>    process_parameter_C.process_S.process.root_process_id = root_process_id</div>
<div class="line"><span class="lineno"> 1135</span> </div>
<div class="line"><span class="lineno"> 1136</span>    <span class="keywordflow">return</span> process_parameter_C.process_S</div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>    <span class="comment">#json_cmd_D[json_file_obj][p_nr] = process_parameter_C.process_S</span></div>
<div class="line"><span class="lineno"> 1139</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da3/namespacesrc_1_1process__project_1_1process__job_ad9b800d2ec43befff2c1735fe208c90c_icgraph.png" border="0" usemap="#ad5/da3/namespacesrc_1_1process__project_1_1process__job_ad9b800d2ec43befff2c1735fe208c90c_icgraph" loading="lazy" alt=""/></div>
<map name="ad5/da3/namespacesrc_1_1process__project_1_1process__job_ad9b800d2ec43befff2c1735fe208c90c_icgraph" id="ad5/da3/namespacesrc_1_1process__project_1_1process__job_ad9b800d2ec43befff2c1735fe208c90c_icgraph">
<area shape="rect" title=" " alt="" coords="239,5,424,46"/>
<area shape="rect" href="../../d5/da3/namespacesrc_1_1process__project_1_1process__job.html#ae34f96646ec14ee098826ac3eb300226" title=" " alt="" coords="5,5,191,46"/>
<area shape="poly" title=" " alt="" coords="223,28,191,28,191,23,223,23"/>
</map>
</div>

</div>
</div>
<a id="ae34f96646ec14ee098826ac3eb300226" name="ae34f96646ec14ee098826ac3eb300226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae34f96646ec14ee098826ac3eb300226">&#9670;&#160;</a></span>Job_processes_loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.process_project.process_job.Job_processes_loop </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>default_parameter_D</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>user_json_process_L</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>process_path</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>process_schema</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'process'</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Setup the processes to run the project
</pre> 
<p class="definition">Definition at line <a class="el" href="../../dc/d17/process__job_8py_source.html#l01140">1140</a> of file <a class="el" href="../../dc/d17/process__job_8py_source.html">process_job.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1140</span><span class="keyword">def </span>Job_processes_loop(default_parameter_D, user_json_process_L, process_path=&#39;&#39;, process_schema=&#39;process&#39;):</div>
<div class="line"><span class="lineno"> 1141</span>    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno"> 1142</span><span class="stringliteral">    Setup the processes to run the project</span></div>
<div class="line"><span class="lineno"> 1143</span><span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno"> 1144</span> </div>
<div class="line"><span class="lineno"> 1145</span>    <span class="keywordflow">if</span> (default_parameter_D[<span class="stringliteral">&#39;postgresdb&#39;</span>][<span class="stringliteral">&#39;db&#39;</span>]):</div>
<div class="line"><span class="lineno"> 1146</span> </div>
<div class="line"><span class="lineno"> 1147</span>        <span class="comment"># Get user status</span></div>
<div class="line"><span class="lineno"> 1148</span>        user_status_D = Project_login(default_parameter_D)</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> user_status_D:</div>
<div class="line"><span class="lineno"> 1151</span> </div>
<div class="line"><span class="lineno"> 1152</span>            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1153</span>        </div>
<div class="line"><span class="lineno"> 1154</span>        <span class="comment"># Set user status</span></div>
<div class="line"><span class="lineno"> 1155</span>        default_parameter_D[<span class="stringliteral">&#39;user_status&#39;</span>] = user_status_D</div>
<div class="line"><span class="lineno"> 1156</span> </div>
<div class="line"><span class="lineno"> 1157</span>        <span class="comment"># Set verbosity for database responses</span></div>
<div class="line"><span class="lineno"> 1158</span>        pg_session_C = PG_session(default_parameter_D[<span class="stringliteral">&#39;postgresdb&#39;</span>][<span class="stringliteral">&#39;db&#39;</span>], default_parameter_D[<span class="stringliteral">&#39;process&#39;</span>][0][<span class="stringliteral">&#39;verbose&#39;</span>])</div>
<div class="line"><span class="lineno"> 1159</span> </div>
<div class="line"><span class="lineno"> 1160</span>    default_parameter_D[<span class="stringliteral">&#39;process_path&#39;</span>] = process_path</div>
<div class="line"><span class="lineno"> 1161</span> </div>
<div class="line"><span class="lineno"> 1162</span>    verbose = default_parameter_D[<span class="stringliteral">&#39;process&#39;</span>][0][<span class="stringliteral">&#39;verbose&#39;</span>]</div>
<div class="line"><span class="lineno"> 1163</span> </div>
<div class="line"><span class="lineno"> 1164</span>    <span class="comment">#user_json_process_L = pilot_L</span></div>
<div class="line"><span class="lineno"> 1165</span> </div>
<div class="line"><span class="lineno"> 1166</span>    <span class="comment"># Clean the list of json objects from comments and whithe space etc</span></div>
<div class="line"><span class="lineno"> 1167</span>    <span class="comment"># user_json_process_L = [path.join(process_path,x.strip())  for x in pilot_L if len(x) &gt; 1 and x[0] != &#39;#&#39;]</span></div>
<div class="line"><span class="lineno"> 1168</span> </div>
<div class="line"><span class="lineno"> 1169</span>    <span class="comment"># Set the default parameters</span></div>
<div class="line"><span class="lineno"> 1170</span>    process_parameter_C  = Params(default_parameter_D)</div>
<div class="line"><span class="lineno"> 1171</span> </div>
<div class="line"><span class="lineno"> 1172</span>    <span class="comment"># Loop over all json files to check if they exists</span></div>
<div class="line"><span class="lineno"> 1173</span>    <span class="keywordflow">for</span> json_file_obj <span class="keywordflow">in</span> user_json_process_L:</div>
<div class="line"><span class="lineno"> 1174</span> </div>
<div class="line"><span class="lineno"> 1175</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> path.exists(json_file_obj):</div>
<div class="line"><span class="lineno"> 1176</span> </div>
<div class="line"><span class="lineno"> 1177</span>            error_msg = <span class="stringliteral">&#39;          ❌ WARNING - json process file not found:\n    %s&#39;</span> %(json_file_obj)</div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>            <span class="keywordflow">print</span> (error_msg)</div>
<div class="line"><span class="lineno"> 1180</span> </div>
<div class="line"><span class="lineno"> 1181</span>            <span class="keywordflow">if</span> (default_parameter_D[<span class="stringliteral">&#39;postgresdb&#39;</span>][<span class="stringliteral">&#39;db&#39;</span>]):</div>
<div class="line"><span class="lineno"> 1182</span> </div>
<div class="line"><span class="lineno"> 1183</span>                <span class="comment"># Close the db connection</span></div>
<div class="line"><span class="lineno"> 1184</span>                pg_session_C._Close()</div>
<div class="line"><span class="lineno"> 1185</span> </div>
<div class="line"><span class="lineno"> 1186</span>            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1187</span> </div>
<div class="line"><span class="lineno"> 1188</span>    <span class="comment"># Dict to hold all processes ready to run</span></div>
<div class="line"><span class="lineno"> 1189</span>    json_cmd_D = {}</div>
<div class="line"><span class="lineno"> 1190</span> </div>
<div class="line"><span class="lineno"> 1191</span>    <span class="comment"># Loop over all json files</span></div>
<div class="line"><span class="lineno"> 1192</span>    <span class="keywordflow">for</span> json_file_obj <span class="keywordflow">in</span> user_json_process_L:</div>
<div class="line"><span class="lineno"> 1193</span> </div>
<div class="line"><span class="lineno"> 1194</span>        json_cmd_D[json_file_obj] = {}</div>
<div class="line"><span class="lineno"> 1195</span> </div>
<div class="line"><span class="lineno"> 1196</span>        <span class="keywordflow">if</span> verbose &gt; 0:</div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>            msg = <span class="stringliteral">&#39;\n    reading jsonObj:\n    %s&#39;</span> %(json_file_obj)</div>
<div class="line"><span class="lineno"> 1199</span> </div>
<div class="line"><span class="lineno"> 1200</span>            <span class="keywordflow">print</span> (msg)</div>
<div class="line"><span class="lineno"> 1201</span> </div>
<div class="line"><span class="lineno"> 1202</span>        user_parameter_D = Read_json(json_file_obj)</div>
<div class="line"><span class="lineno"> 1203</span> </div>
<div class="line"><span class="lineno"> 1204</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> user_parameter_D:</div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span>            msg = (<span class="stringliteral">&#39;\n          ❌ WARNING: json file\n          %s\n          not read - skipping&#39;</span> %json_file_obj)</div>
<div class="line"><span class="lineno"> 1207</span> </div>
<div class="line"><span class="lineno"> 1208</span>            <span class="keywordflow">print</span> (msg)</div>
<div class="line"><span class="lineno"> 1209</span> </div>
<div class="line"><span class="lineno"> 1210</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1211</span> </div>
<div class="line"><span class="lineno"> 1212</span>        <span class="comment"># Set the user defined parameters</span></div>
<div class="line"><span class="lineno"> 1213</span>        process_parameter_C._Set_user_params(user_parameter_D, path.split(json_file_obj)[1])</div>
<div class="line"><span class="lineno"> 1214</span> </div>
<div class="line"><span class="lineno"> 1215</span>        <span class="comment"># Loop over all processes in the json file</span></div>
<div class="line"><span class="lineno"> 1216</span>        <span class="keywordflow">for</span> p_nr, p <span class="keywordflow">in</span> enumerate(user_parameter_D[<span class="stringliteral">&#39;process&#39;</span>]):</div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span>            p_str = str(p_nr)</div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="line"><span class="lineno"> 1220</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> <span class="stringliteral">&#39;sub_process_id&#39;</span> <span class="keywordflow">in</span> p:</div>
<div class="line"><span class="lineno"> 1221</span> </div>
<div class="line"><span class="lineno"> 1222</span>                error_msg = <span class="stringliteral">&#39;          ❌ WARNING: process %s missing sub_process_id&#39;</span> %(p_str)</div>
<div class="line"><span class="lineno"> 1223</span>                </div>
<div class="line"><span class="lineno"> 1224</span>                <span class="keywordflow">print</span> (error_msg)</div>
<div class="line"><span class="lineno"> 1225</span> </div>
<div class="line"><span class="lineno"> 1226</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1227</span> </div>
<div class="line"><span class="lineno"> 1228</span>            <span class="keywordflow">if</span> (default_parameter_D[<span class="stringliteral">&#39;postgresdb&#39;</span>][<span class="stringliteral">&#39;db&#39;</span>]):</div>
<div class="line"><span class="lineno"> 1229</span> </div>
<div class="line"><span class="lineno"> 1230</span>                result = Get_process_from_db(pg_session_C,process_schema,process_parameter_C,user_status_D,json_file_obj, p_str)</div>
<div class="line"><span class="lineno"> 1231</span>                </div>
<div class="line"><span class="lineno"> 1232</span>                <span class="keywordflow">if</span> result:</div>
<div class="line"><span class="lineno"> 1233</span> </div>
<div class="line"><span class="lineno"> 1234</span>                    json_cmd_D[json_file_obj][p_nr] = process_parameter_C.process_S</div>
<div class="line"><span class="lineno"> 1235</span>                    </div>
<div class="line"><span class="lineno"> 1236</span>            <span class="keywordflow">else</span>: <span class="comment"># No db connection, just read the parameters</span></div>
<div class="line"><span class="lineno"> 1237</span> </div>
<div class="line"><span class="lineno"> 1238</span>                process_D = {<span class="stringliteral">&quot;process_S&quot;</span>:{<span class="stringliteral">&quot;process&quot;</span>:{ <span class="stringliteral">&quot;sub_process_id&quot;</span>: user_parameter_D[<span class="stringliteral">&#39;process&#39;</span>][p_nr][<span class="stringliteral">&#39;sub_process_id&#39;</span>],</div>
<div class="line"><span class="lineno"> 1239</span>                                                                  <span class="stringliteral">&quot;overwrite&quot;</span>: user_parameter_D[<span class="stringliteral">&#39;process&#39;</span>][p_nr][<span class="stringliteral">&#39;overwrite&#39;</span>],</div>
<div class="line"><span class="lineno"> 1240</span>                                                                    <span class="stringliteral">&quot;parameters&quot;</span>: user_parameter_D[<span class="stringliteral">&#39;process&#39;</span>][p_nr][<span class="stringliteral">&#39;parameters&#39;</span>]}}}</div>
<div class="line"><span class="lineno"> 1241</span> </div>
<div class="line"><span class="lineno"> 1242</span>                json_cmd_D[json_file_obj][p_nr] = Struct(process_D)</div>
<div class="line"><span class="lineno"> 1243</span> </div>
<div class="line"><span class="lineno"> 1244</span>    <span class="comment"># Close the db connection if this is a database required process</span></div>
<div class="line"><span class="lineno"> 1245</span>    <span class="keywordflow">if</span> (default_parameter_D[<span class="stringliteral">&#39;postgresdb&#39;</span>][<span class="stringliteral">&#39;db&#39;</span>]):</div>
<div class="line"><span class="lineno"> 1246</span> </div>
<div class="line"><span class="lineno"> 1247</span>        pg_session_C._Close()</div>
<div class="line"><span class="lineno"> 1248</span> </div>
<div class="line"><span class="lineno"> 1249</span>    <span class="keywordflow">return</span> json_cmd_D</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da3/namespacesrc_1_1process__project_1_1process__job_ae34f96646ec14ee098826ac3eb300226_cgraph.png" border="0" usemap="#ad5/da3/namespacesrc_1_1process__project_1_1process__job_ae34f96646ec14ee098826ac3eb300226_cgraph" loading="lazy" alt=""/></div>
<map name="ad5/da3/namespacesrc_1_1process__project_1_1process__job_ae34f96646ec14ee098826ac3eb300226_cgraph" id="ad5/da3/namespacesrc_1_1process__project_1_1process__job_ae34f96646ec14ee098826ac3eb300226_cgraph">
<area shape="rect" title=" " alt="" coords="5,39,191,79"/>
<area shape="rect" href="../../d5/da3/namespacesrc_1_1process__project_1_1process__job.html#ad9b800d2ec43befff2c1735fe208c90c" title=" " alt="" coords="239,5,424,46"/>
<area shape="poly" title=" " alt="" coords="191,43,223,38,223,44,192,48"/>
<area shape="rect" href="../../d5/da3/namespacesrc_1_1process__project_1_1process__job.html#aed1d9dd5c526dc5e1e56311b481d6e36" title=" " alt="" coords="239,71,424,111"/>
<area shape="poly" title=" " alt="" coords="192,69,223,74,223,79,191,74"/>
</map>
</div>

</div>
</div>
<a id="aed1d9dd5c526dc5e1e56311b481d6e36" name="aed1d9dd5c526dc5e1e56311b481d6e36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed1d9dd5c526dc5e1e56311b481d6e36">&#9670;&#160;</a></span>Project_login()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.process_project.process_job.Project_login </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>default_parameter_D</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Login to the project and set user status
</pre> 
<p class="definition">Definition at line <a class="el" href="../../dc/d17/process__job_8py_source.html#l00948">948</a> of file <a class="el" href="../../dc/d17/process__job_8py_source.html">process_job.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  948</span><span class="keyword">def </span>Project_login(default_parameter_D):</div>
<div class="line"><span class="lineno">  949</span>    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  950</span><span class="stringliteral">    Login to the project and set user status</span></div>
<div class="line"><span class="lineno">  951</span><span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">  952</span> </div>
<div class="line"><span class="lineno">  953</span>    result = PG_check_user_settings(default_parameter_D)</div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> result:</div>
<div class="line"><span class="lineno">  956</span> </div>
<div class="line"><span class="lineno">  957</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;❌ WARNING: could not login to database - exiting&#39;</span>)</div>
<div class="line"><span class="lineno">  958</span> </div>
<div class="line"><span class="lineno">  959</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  960</span>    </div>
<div class="line"><span class="lineno">  961</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> <span class="stringliteral">&#39;user_project&#39;</span> <span class="keywordflow">in</span> default_parameter_D:</div>
<div class="line"><span class="lineno">  962</span> </div>
<div class="line"><span class="lineno">  963</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;❌ WARNING: object &lt;user_project&gt; missing in suer_project_file&#39;</span>)</div>
<div class="line"><span class="lineno">  964</span> </div>
<div class="line"><span class="lineno">  965</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  966</span> </div>
<div class="line"><span class="lineno">  967</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;user_netrc_id&#39;</span> <span class="keywordflow">in</span> default_parameter_D[<span class="stringliteral">&#39;user_project&#39;</span>] <span class="keywordflow">and</span> \</div>
<div class="line"><span class="lineno">  968</span>        len(default_parameter_D[<span class="stringliteral">&#39;user_project&#39;</span>][<span class="stringliteral">&#39;user_netrc_id&#39;</span>]) &gt; 0:</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>        rec = PG_user_status(result, default_parameter_D[<span class="stringliteral">&#39;user_project&#39;</span>][<span class="stringliteral">&#39;user_netrc_id&#39;</span>])</div>
<div class="line"><span class="lineno">  971</span> </div>
<div class="line"><span class="lineno">  972</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  973</span> </div>
<div class="line"><span class="lineno">  974</span>        rec = PG_user_status(result,</div>
<div class="line"><span class="lineno">  975</span>                             <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  976</span>                             default_parameter_D[<span class="stringliteral">&#39;user_project&#39;</span>][<span class="stringliteral">&#39;user_id&#39;</span>],</div>
<div class="line"><span class="lineno">  977</span>                             b64encode(default_parameter_D[<span class="stringliteral">&#39;user_project&#39;</span>][<span class="stringliteral">&#39;user_password&#39;</span>]).encode())</div>
<div class="line"><span class="lineno">  978</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> rec:</div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;❌ WARNING: unrecognised user (%s) - exiting&#39;</span> %(default_parameter_D[<span class="stringliteral">&#39;user_project&#39;</span>][<span class="stringliteral">&#39;user_id&#39;</span>]))</div>
<div class="line"><span class="lineno">  981</span> </div>
<div class="line"><span class="lineno">  982</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  983</span> </div>
<div class="line"><span class="lineno">  984</span>    parmas = [<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;email&#39;</span>, <span class="stringliteral">&#39;first_name&#39;</span>, <span class="stringliteral">&#39;middle_name&#39;</span>, <span class="stringliteral">&#39;last_name&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;stratum_code&#39;</span>, <span class="stringliteral">&#39;status_code&#39;</span>]</div>
<div class="line"><span class="lineno">  985</span>    <span class="comment">#user_id, user_rights, user_region, user_project, user_project_id, user_project_region, user_project_region_id = rec</span></div>
<div class="line"><span class="lineno">  986</span> </div>
<div class="line"><span class="lineno">  987</span>    user_status_D = dict(zip(parmas, rec))</div>
<div class="line"><span class="lineno">  988</span> </div>
<div class="line"><span class="lineno">  989</span>    <span class="keywordflow">return</span> user_status_D</div>
<div class="line"><span class="lineno">  990</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da3/namespacesrc_1_1process__project_1_1process__job_aed1d9dd5c526dc5e1e56311b481d6e36_icgraph.png" border="0" usemap="#ad5/da3/namespacesrc_1_1process__project_1_1process__job_aed1d9dd5c526dc5e1e56311b481d6e36_icgraph" loading="lazy" alt=""/></div>
<map name="ad5/da3/namespacesrc_1_1process__project_1_1process__job_aed1d9dd5c526dc5e1e56311b481d6e36_icgraph" id="ad5/da3/namespacesrc_1_1process__project_1_1process__job_aed1d9dd5c526dc5e1e56311b481d6e36_icgraph">
<area shape="rect" title=" " alt="" coords="239,5,424,46"/>
<area shape="rect" href="../../d5/da3/namespacesrc_1_1process__project_1_1process__job.html#ae34f96646ec14ee098826ac3eb300226" title=" " alt="" coords="5,5,191,46"/>
<area shape="poly" title=" " alt="" coords="223,28,191,28,191,23,223,23"/>
</map>
</div>

</div>
</div>
<a id="a02c660e420ee37a3e0670cc4eb333a4d" name="a02c660e420ee37a3e0670cc4eb333a4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02c660e420ee37a3e0670cc4eb333a4d">&#9670;&#160;</a></span>Update_dict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.process_project.process_job.Update_dict </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>user_D</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>default_D</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment"></pre> 
<p class="definition">Definition at line <a class="el" href="../../dc/d17/process__job_8py_source.html#l00032">32</a> of file <a class="el" href="../../dc/d17/process__job_8py_source.html">process_job.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span><span class="keyword">def </span>Update_dict(user_D, default_D):</div>
<div class="line"><span class="lineno">   33</span>    <span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   34</span><span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span>    d = {key: default_D.get(key, user_D[key]) <span class="keywordflow">for</span> key <span class="keywordflow">in</span> user_D}</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> default_D:</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>        <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> d:</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>            user_D[key] = default_D[key]</div>
<div class="line"><span class="lineno">   43</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da3/namespacesrc_1_1process__project_1_1process__job_a02c660e420ee37a3e0670cc4eb333a4d_icgraph.png" border="0" usemap="#ad5/da3/namespacesrc_1_1process__project_1_1process__job_a02c660e420ee37a3e0670cc4eb333a4d_icgraph" loading="lazy" alt=""/></div>
<map name="ad5/da3/namespacesrc_1_1process__project_1_1process__job_a02c660e420ee37a3e0670cc4eb333a4d_icgraph" id="ad5/da3/namespacesrc_1_1process__project_1_1process__job_a02c660e420ee37a3e0670cc4eb333a4d_icgraph">
<area shape="rect" title=" " alt="" coords="289,39,474,79"/>
<area shape="rect" href="../../d0/dd3/classsrc_1_1process__project_1_1process__job_1_1_params.html#a08c17535c1bd627b4afc7cacba5d3775" title=" " alt="" coords="5,5,241,46"/>
<area shape="poly" title=" " alt="" coords="273,48,241,44,242,38,273,42"/>
<area shape="rect" href="../../d0/dd3/classsrc_1_1process__project_1_1process__job_1_1_params.html#abe0f2df0f4dce4995e05de9cf1fb0de6" title=" " alt="" coords="30,71,216,111"/>
<area shape="poly" title=" " alt="" coords="273,75,217,82,216,77,273,70"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="../../d8/d59/namespacesrc.html">src</a></li><li class="navelem"><a href="../../d6/d57/namespacesrc_1_1process__project.html">process_project</a></li><li class="navelem"><a href="../../d5/da3/namespacesrc_1_1process__project_1_1process__job.html">process_job</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
